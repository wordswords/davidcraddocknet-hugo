<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>My Homelab | DavidCraddock.net</title>
<meta name="keywords" content="">
<meta name="description" content="My home network routes at around 2-4gbit/sec between 10gbit/sec DAC fibre connected hosts, and around 2gbit/sec via CAT8 for Thunderbolt 2.5Ggbit/sec laptop network interfaces. We two Ubiquiti wireless APs in a mesh configuration, with seperate SSIDs for 2Ghz, 5Ghz, guest and IOT networks. The guest and IOT networks are isolated from everything else. I use a Mikrotik router which hosts an iperf3 docker container for network testing I have a home server running Ubuntu Linux that hosts a bunch of services via docker containers, including Pi-Hole for DNS and a Ubiquiti Network Controller.">
<meta name="author" content="Reorx">
<link rel="canonical" href="http://davidcraddock.net/my-home-network/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.97d99fcdd90c38f6e3343e959a97a0295b30f590730a4ece2347f7f24ad997d1.css" integrity="sha256-l9mfzdkMOPbjND6VmpegKVsw9ZBzCk7OI0f38krZl9E=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://davidcraddock.net/favicon.ico">
<link rel="apple-touch-icon" href="http://davidcraddock.net/apple-touch-icon.png">
<link rel="alternate" hreflang="en" href="http://davidcraddock.net/my-home-network/">
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="My Homelab | DavidCraddock.net" />
<meta name="twitter:description" content="My home network routes at around 2-4gbit/sec between 10gbit/sec DAC fibre connected hosts, and around 2gbit/sec via CAT8 for Thunderbolt 2.5Ggbit/sec laptop network interfaces. We two Ubiquiti wireless APs in a mesh configuration, with seperate SSIDs for 2Ghz, 5Ghz, guest and IOT networks. The guest and IOT networks are isolated from everything else. I use a Mikrotik router which hosts an iperf3 docker container for network testing I have a home server running Ubuntu Linux that hosts a bunch of services via docker containers, including Pi-Hole for DNS and a Ubiquiti Network Controller." />
<meta property="og:title" content="My Homelab | DavidCraddock.net" />
<meta property="og:description" content="My home network routes at around 2-4gbit/sec between 10gbit/sec DAC fibre connected hosts, and around 2gbit/sec via CAT8 for Thunderbolt 2.5Ggbit/sec laptop network interfaces. We two Ubiquiti wireless APs in a mesh configuration, with seperate SSIDs for 2Ghz, 5Ghz, guest and IOT networks. The guest and IOT networks are isolated from everything else. I use a Mikrotik router which hosts an iperf3 docker container for network testing I have a home server running Ubuntu Linux that hosts a bunch of services via docker containers, including Pi-Hole for DNS and a Ubiquiti Network Controller." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://davidcraddock.net/my-home-network/" />
    <meta property="og:image" content="http://davidcraddock.net/cover.png"/>
<meta property="article:section" content="pages" />
  <meta property="article:published_time" content="2023-12-17T02:13:39&#43;00:00" />
  <meta property="article:modified_time" content="2023-12-17T02:13:39&#43;00:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "pages",
      "item": "http://davidcraddock.net/pages/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "My Homelab",
      "item": "http://davidcraddock.net/my-home-network/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "My Homelab | DavidCraddock.net",
  "name": "My Homelab",
  "description": "My home network routes at around 2-4gbit/sec between 10gbit/sec DAC fibre connected hosts, and around 2gbit/sec via CAT8 for Thunderbolt 2.5Ggbit/sec laptop network interfaces. We two Ubiquiti wireless APs in a mesh configuration, with seperate SSIDs for 2Ghz, 5Ghz, guest and IOT networks. The guest and IOT networks are isolated from everything else. I use a Mikrotik router which hosts an iperf3 docker container for network testing I have a home server running Ubuntu Linux that hosts a bunch of services via docker containers, including Pi-Hole for DNS and a Ubiquiti Network Controller.",
  "keywords": [
    
  ],
  "wordCount" : "786",
  "inLanguage": "en",
  "datePublished": "2023-12-17T02:13:39Z",
  "dateModified": "2023-12-17T02:13:39Z",
  "author":[{
    "@type": "Person",
    "name": "Reorx"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://davidcraddock.net/my-home-network/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "DavidCraddock.net",
    "logo": {
      "@type": "ImageObject",
      "url": "http://davidcraddock.net/favicon.ico"
    }
  }
}
</script>
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary-bg: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list-page {
                background: var(--theme);
            }

            .list-page:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list-page:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

</head>

<body class=" type-pages kind-page layout-" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'auto';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://davidcraddock.net/" accesskey="h" title="DavidCraddock.net (Alt + H)">DavidCraddock.net</a>
            <span class="logo-switches">
            </span>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://davidcraddock.net/">Home</a>&nbsp;Â»&nbsp;<a href="http://davidcraddock.net/pages/">pages</a></div><h1 class="post-title">My Homelab</h1>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>2023-12-17</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text" style="user-select: text;"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" style="user-select: text;"></path><polyline points="14 2 14 8 20 8" style="user-select: text;"></polyline><line x1="16" y1="13" x2="8" y2="13" style="user-select: text;"></line><line x1="16" y1="17" x2="8" y2="17" style="user-select: text;"></line><polyline points="10 9 9 9 8 9" style="user-select: text;"></polyline></svg>
  <span>786 words</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="12" cy="12" r="9"></circle><polyline points="12 7 12 12 15 15"></polyline></svg>
  <span>4 min</span></span>

      
      
    </div>
  </header> <div class="toc side left">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#iperf3-speed-tests" aria-label="Iperf3 Speed Tests">Iperf3 Speed Tests</a><ul>
                        
                <li>
                    <a href="#studio-pc---server-network-speed" aria-label="Studio PC -&amp;gt; Server network speed">Studio PC -&gt; Server network speed</a></li>
                <li>
                    <a href="#server---router-network-speed" aria-label="Server -&amp;gt; Router network speed">Server -&gt; Router network speed</a></li>
                <li>
                    <a href="#studio-pc---router-network-speed" aria-label="Studio PC -&amp;gt; Router network speed">Studio PC -&gt; Router network speed</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><ul>
<li>My home network routes at around 2-4gbit/sec between 10gbit/sec DAC fibre connected hosts, and around 2gbit/sec via CAT8 for Thunderbolt 2.5Ggbit/sec laptop network interfaces.</li>
<li>We two Ubiquiti wireless APs in a mesh configuration, with seperate SSIDs for 2Ghz, 5Ghz, guest and IOT networks. The guest and IOT networks are isolated from everything else.</li>
<li>I use a Mikrotik router which hosts an iperf3 docker container for network testing</li>
<li>I have a home server running Ubuntu Linux that hosts a bunch of services via docker containers, including Pi-Hole for DNS and a Ubiquiti Network Controller.</li>
<li>I have a Google smart home setup with 2x Google Home Mini speakers, 1x Google Home Hub (1st) gen, 1x Google Doorbell, 1x Google Nest Smoke Alarm, 1x Google Nest Thermostat, and 2x Google Nest Cameras.</li>
<li>We have a Phillips Hue light source setup, with 5 Hue lights in the Music Studio/Games room, which I set to strobe to music when I do my DJ sets, and setup as a Hue Entertainment Area when I play games/watch films. I also have Hue lights in the study and my bedroom, with dimmers etc.</li>
<li>We have a robotic vacuum cleaner which helps Conny around the house. We call it &lsquo;Dusterbuster&rsquo;.</li>
<li>Wherever possible, all devices have a wired network connection. Wireless is only used as a last resort, to minimise spectrum interference.</li>
<li>We use ZeroTier as a VPN so that everything useful is accessible outside the home.</li>
<li>We run a Plex server so that all music and video content is accessible outside the home, which is shared with friends.</li>
</ul>
<p><a href="/wp-content/uploads/2024/05/network.drawio2.png"><img loading="lazy" src="/wp-content/uploads/2024/05/network.drawio2.png" type="" alt=""  /></a></p>
<h3 id="iperf3-speed-tests">Iperf3 Speed Tests</h3>
<h4 id="studio-pc---server-network-speed">Studio PC -&gt; Server network speed</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>[ ID] Interval           Transfer     Bitrate         Retr  Cwnd
</span></span><span style="display:flex;"><span>[  5]   0.00-1.00   sec   354 MBytes  2.97 Gbits/sec    7   2.30 MBytes
</span></span><span style="display:flex;"><span>[  5]   1.00-2.00   sec   380 MBytes  3.19 Gbits/sec    0   2.42 MBytes
</span></span><span style="display:flex;"><span>[  5]   2.00-3.00   sec   386 MBytes  3.24 Gbits/sec    0   2.53 MBytes
</span></span><span style="display:flex;"><span>[  5]   3.00-4.00   sec   385 MBytes  3.23 Gbits/sec    0   2.64 MBytes
</span></span><span style="display:flex;"><span>[  5]   4.00-5.00   sec   386 MBytes  3.24 Gbits/sec    0   2.75 MBytes
</span></span><span style="display:flex;"><span>[  5]   5.00-6.00   sec   380 MBytes  3.19 Gbits/sec    2   2.84 MBytes
</span></span><span style="display:flex;"><span>[  5]   6.00-7.00   sec   386 MBytes  3.24 Gbits/sec   10   2.93 MBytes
</span></span><span style="display:flex;"><span>[  5]   7.00-8.00   sec   384 MBytes  3.22 Gbits/sec    0   3.00 MBytes
</span></span><span style="display:flex;"><span>[  5]   8.00-9.00   sec   386 MBytes  3.24 Gbits/sec    0   3.00 MBytes
</span></span><span style="display:flex;"><span>[  5]   9.00-10.00  sec   385 MBytes  3.23 Gbits/sec    0   3.00 MBytes
</span></span><span style="display:flex;"><span>- - - - - - - - - - - - - - - - - - - - - - - - -
</span></span><span style="display:flex;"><span>[ ID] Interval           Transfer     Bitrate         Retr
</span></span><span style="display:flex;"><span>[  5]   0.00-10.00  sec  3.72 GBytes  3.20 Gbits/sec   19             sender
</span></span><span style="display:flex;"><span>[  5]   0.00-10.00  sec  3.72 GBytes  3.20 Gbits/sec                  receiver
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>iperf Done.
</span></span></code></pre></div><h4 id="server---router-network-speed">Server -&gt; Router network speed</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>[ ID] Interval           Transfer     Bitrate         Retr  Cwnd
</span></span><span style="display:flex;"><span>[  5]   0.00-1.00   sec   456 MBytes  3.83 Gbits/sec  1170    291 KBytes
</span></span><span style="display:flex;"><span>[  5]   1.00-2.00   sec   407 MBytes  3.41 Gbits/sec  801    512 KBytes
</span></span><span style="display:flex;"><span>[  5]   2.00-3.00   sec   286 MBytes  2.40 Gbits/sec    0    512 KBytes
</span></span><span style="display:flex;"><span>[  5]   3.00-4.00   sec   286 MBytes  2.40 Gbits/sec    0    512 KBytes
</span></span><span style="display:flex;"><span>[  5]   4.00-5.00   sec   456 MBytes  3.82 Gbits/sec  1269    344 KBytes
</span></span><span style="display:flex;"><span>[  5]   5.00-6.00   sec   476 MBytes  4.00 Gbits/sec  1353    407 KBytes
</span></span><span style="display:flex;"><span>[  5]   6.00-7.00   sec   485 MBytes  4.07 Gbits/sec  1440    348 KBytes
</span></span><span style="display:flex;"><span>[  5]   7.00-8.00   sec   491 MBytes  4.12 Gbits/sec  1168    279 KBytes
</span></span><span style="display:flex;"><span>[  5]   8.00-9.00   sec   489 MBytes  4.10 Gbits/sec  1229    256 KBytes
</span></span><span style="display:flex;"><span>[  5]   9.00-10.00  sec   476 MBytes  4.00 Gbits/sec  1602    298 KBytes
</span></span><span style="display:flex;"><span>- - - - - - - - - - - - - - - - - - - - - - - - -
</span></span><span style="display:flex;"><span>[ ID] Interval           Transfer     Bitrate         Retr
</span></span><span style="display:flex;"><span>[  5]   0.00-10.00  sec  4.21 GBytes  3.61 Gbits/sec  10032             sender
</span></span><span style="display:flex;"><span>[  5]   0.00-10.00  sec  4.20 GBytes  3.61 Gbits/sec                  receiver
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>iperf Done.
</span></span></code></pre></div><h4 id="studio-pc---router-network-speed">Studio PC -&gt; Router network speed</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>[ ID] Interval           Transfer     Bitrate         Retr  Cwnd
</span></span><span style="display:flex;"><span>[  5]   0.00-1.00   sec   281 MBytes  2.36 Gbits/sec   27    881 KBytes
</span></span><span style="display:flex;"><span>[  5]   1.00-2.00   sec   279 MBytes  2.34 Gbits/sec    0    881 KBytes
</span></span><span style="display:flex;"><span>[  5]   2.00-3.00   sec   279 MBytes  2.34 Gbits/sec    0    887 KBytes
</span></span><span style="display:flex;"><span>[  5]   3.00-4.00   sec   304 MBytes  2.55 Gbits/sec  308    629 KBytes
</span></span><span style="display:flex;"><span>[  5]   4.00-5.00   sec   351 MBytes  2.95 Gbits/sec  737    622 KBytes
</span></span><span style="display:flex;"><span>[  5]   5.00-6.00   sec   334 MBytes  2.80 Gbits/sec  808    580 KBytes
</span></span><span style="display:flex;"><span>[  5]   6.00-7.00   sec   355 MBytes  2.98 Gbits/sec  686    430 KBytes
</span></span><span style="display:flex;"><span>[  5]   7.00-8.00   sec   352 MBytes  2.96 Gbits/sec  564    413 KBytes
</span></span><span style="display:flex;"><span>[  5]   8.00-9.00   sec   362 MBytes  3.04 Gbits/sec  809    427 KBytes
</span></span><span style="display:flex;"><span>[  5]   9.00-10.00  sec   356 MBytes  2.99 Gbits/sec  665    598 KBytes
</span></span><span style="display:flex;"><span>- - - - - - - - - - - - - - - - - - - - - - - - -
</span></span><span style="display:flex;"><span>[ ID] Interval           Transfer     Bitrate         Retr
</span></span><span style="display:flex;"><span>[  5]   0.00-10.00  sec  3.18 GBytes  2.73 Gbits/sec  4604             sender
</span></span><span style="display:flex;"><span>[  5]   0.00-10.00  sec  3.17 GBytes  2.73 Gbits/sec                  receiver
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>iperf Done.
</span></span></code></pre></div>
  </div>

<div>
    <ul>
        <li><a href="/">Blog Posts</a></li>
        <li><a href="/my-home-network/">Home Network</a></li>
        <li><a href="/my-gaming-setup/">Gaming Setup</a></li>
        <li><a href="/my-mobile-laptop-setup/">Mobile Working Setup</a></li>
        <li><a href="/my-work-computer/">WFH Computer Setup</a></li>
        <li><a href="/my-bike/">Bike Setup</a></li>
        <li><a href="http://davidcraddocktutor.com">Software Career Tutoring</a></li>
        <li><a href="http://davidcraddockaudio.com">Music Industry Portfolio</a></li>
        <li><a href="https://github.com/wordswords/dotfiles.git">My Github</a></li>
    </ul>
</div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="http://davidcraddock.net/my-mobile-laptop-setup/">
    <span class="title">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select: text;"><line x1="19" y1="12" x2="5" y2="12" style="user-select: text;"></line><polyline points="12 19 5 12 12 5" style="user-select: text;"></polyline></svg>&nbsp;Prev Page</span>
    <br>
    <span>My Mobile Laptop Setup</span>
  </a>
  <a class="next" href="http://davidcraddock.net/my-gaming-setup/">
    <span class="title">Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select: text;"><line x1="5" y1="12" x2="19" y2="12" style="user-select: text;"></line><polyline points="12 5 19 12 12 19" style="user-select: text;"></polyline></svg>
    </span>
    <br>
    <span>My Media and Gaming Setup</span>
  </a>
</nav>

  </footer>
    <div class="comments-separator"></div><div class="comments-box">
  <div id="disqus_thread"></div>
</div>

<script type="text/javascript">
  var disqus_config = function () {
    this.page.url = 'http:\/\/davidcraddock.net\/my-home-network\/';  
    this.page.identifier = 'my-home-network'; 
  };

  (function () {
    const disqus = window.DISQUS
    if (disqus) {
      
      
      disqus.reset({
        reload: true,
        config: disqus_config,
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = '//' + 'davidcraddocknet' + '.disqus.com/embed.js';
      s.defer = true;
      s.setAttribute('data-timestamp', +new Date());
      
      s.setAttribute('data-no-instant', '')
      d.head.appendChild(s);
    }
  })();
</script>

</article>
    </main>
    
<footer class="footer">
  <span>&copy; 2024 <a href="http://davidcraddock.net/">DavidCraddock.net</a></span><span style="display: inline-block; margin-left: 1em;">
    <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a>
  </span>
  <span style="display: inline-block; margin-left: 1em;">
    Powered by
    <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
    <a href="https://github.com/reorx/hugo-PaperModX/" rel="noopener" target="_blank">PaperModX</a>
  </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '1' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '1' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>
<script>
  document.querySelectorAll('pre > code').forEach((codeblock) => {
    const container = codeblock.parentNode.parentNode;

    const copybutton = document.createElement('button');
    copybutton.classList.add('copy-code');
    copybutton.innerText = 'copy';

    function copyingDone() {
      copybutton.innerText = 'copied!';
      setTimeout(() => {
        copybutton.innerText = 'copy';
      }, 2000);
    }

    copybutton.addEventListener('click', (cb) => {
      if ('clipboard' in navigator) {
        navigator.clipboard.writeText(codeblock.textContent);
        copyingDone();
        return;
      }

      const range = document.createRange();
      range.selectNodeContents(codeblock);
      const selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
      try {
        document.execCommand('copy');
        copyingDone();
      } catch (e) { };
      selection.removeRange(range);
    });

    if (container.classList.contains("highlight")) {
      container.appendChild(copybutton);
    } else if (container.parentNode.firstChild == container) {
      
    } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
      
      codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
    } else {
      
      codeblock.parentNode.appendChild(copybutton);
    }
  });
</script>




<script>
  
  
  (function() {
    const enableTocScroll = '1' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>
<script>
  mediumZoom('.entry-cover img');
  mediumZoom('.post-content img:not([no-zoom])');
</script>

<script src="/js/instantclick.min.js" data-no-instant
></script>
<script data-no-instant>
  
  
  
  
  
  
  InstantClick.init();
</script>
</body>

</html>
