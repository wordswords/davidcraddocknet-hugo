<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Php-Scraper on DavidCraddock.net</title>
    <link>http://davidcraddock.net/tag/php-scraper/</link>
    <description>Recent content in Php-Scraper on DavidCraddock.net</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Thu, 14 Jan 2010 05:53:47 +0000</lastBuildDate><atom:link href="http://davidcraddock.net/tag/php-scraper/feed.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>PHP Sample - HTML Page Fetcher and Parser</title>
      <link>http://davidcraddock.net/2010/01/14/php-sample-html-page-fetcher-and-parser/</link>
      <pubDate>Thu, 14 Jan 2010 05:53:47 +0000</pubDate>
      
      <guid>http://davidcraddock.net/2010/01/14/php-sample-html-page-fetcher-and-parser/</guid>
      <description>Back in 2008, I wrote a PHP class that fetched an arbitary URL, parsed it, and coverted it into an PHP object with different attributes for the different elements of the page. I recently updated it and sent it along to a company that wanted a programming example to show I could code in PHP.
I thought someone may well find a use for it - I&amp;rsquo;ve used the class in several different web scraping applications, and I found it handy.</description>
      <content:encoded><![CDATA[<p>Back in 2008, I wrote a PHP class that fetched an arbitary URL, parsed it, and coverted it into an PHP object with different attributes for the different elements of the page. I recently updated it and sent it along to a company that wanted a programming example to show I could code in PHP.</p>
<p>I thought someone may well find a use for it - I&rsquo;ve used the class in several different web scraping applications, and I found it handy. From the readme:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>This is a class I wrote back in 2008 to help me pull down and parse HTML pages I updated it on
</span></span><span style="display:flex;"><span>14/01/10 to print the results in a nicer way to the commandline.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>- David Craddock (contact@davidcraddock.net)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/// WHAT IT DOES
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>It uses CURL to pull down a page from a URL, and sorts it into a &#39;Page&#39; object
</span></span><span style="display:flex;"><span>which has different attributes for the different HTML properties of the page
</span></span><span style="display:flex;"><span>structure. By default it will also print the page object&#39;s properties neatly
</span></span><span style="display:flex;"><span>onto the commandline as part of its unit test.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/// FILES
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>* README.txt - this file
</span></span><span style="display:flex;"><span>* page.php - The PHP Class
</span></span><span style="display:flex;"><span>* LIB_http.php - a lightweight external library that I used. It is just a very light wrapper around CURL&#39;s HTTP functions.
</span></span><span style="display:flex;"><span>* expected-result.txt - output of the unit tests on my development machine
</span></span><span style="display:flex;"><span>* curl-cookie-jar.txt - this file will be created when you run the page.php&#39;s unit test
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/// SETUP
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>You will need CURL installed, PHP&#39;s DOMXPATH functions available, and the PHP
</span></span><span style="display:flex;"><span>command line interface. It was tested on PHP5 on OSX.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/// RUNNING
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Use the php commandline executable to run the page.php unit tests. IE:
</span></span><span style="display:flex;"><span>$ php page.php
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>You should see a bunch of information being printed out, you can use:
</span></span><span style="display:flex;"><span>$ php page.php &gt; result.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>That will output the info to result.txt so you can read it at will.
</span></span></code></pre></div><p>Here&rsquo;s an example of one of the unit tests, which fetches this frontpage and parses it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span><span style="color:#f92672">**++++</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">***</span> Page Print of http:<span style="color:#f92672">//</span>www<span style="color:#f92672">.</span>davidcraddock<span style="color:#f92672">.</span>net <span style="color:#f92672">***</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">**++++</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">**</span> Transfer Status
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span> URL Retrieved:
</span></span><span style="display:flex;"><span>http:<span style="color:#f92672">//</span>www<span style="color:#f92672">.</span>davidcraddock<span style="color:#f92672">.</span>net
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span> CURL Fetch Status:
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Array</span>
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>    [url] <span style="color:#f92672">=&gt;</span> http:<span style="color:#f92672">//</span>www<span style="color:#f92672">.</span>davidcraddock<span style="color:#f92672">.</span>net
</span></span><span style="display:flex;"><span>    [content_type] <span style="color:#f92672">=&gt;</span> text<span style="color:#f92672">/</span>html; charset<span style="color:#f92672">=</span>UTF<span style="color:#f92672">-</span><span style="color:#ae81ff">8</span>
</span></span><span style="display:flex;"><span>    [http_code] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">200</span>
</span></span><span style="display:flex;"><span>    [header_size] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">237</span>
</span></span><span style="display:flex;"><span>    [request_size] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">175</span>
</span></span><span style="display:flex;"><span>    [filetime] <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    [ssl_verify_result] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    [redirect_count] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    [total_time] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1.490972</span>
</span></span><span style="display:flex;"><span>    [namelookup_time] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">5.3E-5</span>
</span></span><span style="display:flex;"><span>    [connect_time] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0.175803</span>
</span></span><span style="display:flex;"><span>    [pretransfer_time] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0.175812</span>
</span></span><span style="display:flex;"><span>    [size_upload] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    [size_download] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">30416</span>
</span></span><span style="display:flex;"><span>    [speed_download] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">20400</span>
</span></span><span style="display:flex;"><span>    [speed_upload] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    [download_content_length] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">30416</span>
</span></span><span style="display:flex;"><span>    [upload_content_length] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    [starttransfer_time] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0.714943</span>
</span></span><span style="display:flex;"><span>    [redirect_time] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">**</span> Header
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span> Title: Random Eye Movement
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span> Meta Desc:
</span></span><span style="display:flex;"><span>Not Set
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span> Meta Keywords:
</span></span><span style="display:flex;"><span>Not Set
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span> Meta Robots:
</span></span><span style="display:flex;"><span>Not Set
</span></span><span style="display:flex;"><span><span style="color:#f92672">**</span> Flags
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span> Has Frames<span style="color:#960050;background-color:#1e0010">?</span>:
</span></span><span style="display:flex;"><span>FALSE
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span> Has body content been parsed<span style="color:#960050;background-color:#1e0010">?</span>:
</span></span><span style="display:flex;"><span>TRUE
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">**</span> Non Html Tags
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span> Tags scanned <span style="color:#66d9ef">for</span>:
</span></span><span style="display:flex;"><span>Tag Type: script tags processed: <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>Tag Type: embed tags processed: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>Tag Type: style tags processed: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span> Tag contents:
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Array</span>
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>    [ script ] <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">Array</span>
</span></span><span style="display:flex;"><span>        (
</span></span><span style="display:flex;"><span>            [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">Array</span>
</span></span><span style="display:flex;"><span>                (
</span></span><span style="display:flex;"><span>                    [src] <span style="color:#f92672">=&gt;</span> http:<span style="color:#f92672">//</span>www<span style="color:#f92672">.</span>davidcraddock<span style="color:#f92672">.</span>net<span style="color:#f92672">/</span>wp<span style="color:#f92672">-</span>content<span style="color:#f92672">/</span>themes<span style="color:#f92672">/</span>this<span style="color:#f92672">-</span>just<span style="color:#f92672">-</span><span style="color:#f92672">in</span><span style="color:#f92672">/</span>js<span style="color:#f92672">/</span>ThemeJS<span style="color:#f92672">.</span>js
</span></span><span style="display:flex;"><span>                    [type] <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>                    [isinline] <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>                    [content] <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>                )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            [<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">Array</span>
</span></span><span style="display:flex;"><span>                (
</span></span><span style="display:flex;"><span>                    [src] <span style="color:#f92672">=&gt;</span> http:<span style="color:#f92672">//</span>www<span style="color:#f92672">.</span>davidcraddock<span style="color:#f92672">.</span>net<span style="color:#f92672">/</span>wp<span style="color:#f92672">-</span>content<span style="color:#f92672">/</span>plugins<span style="color:#f92672">/</span>lifestream<span style="color:#f92672">/</span>lifestream<span style="color:#f92672">.</span>js
</span></span><span style="display:flex;"><span>                    [type] <span style="color:#f92672">=&gt;</span> text<span style="color:#f92672">/</span>javascript
</span></span><span style="display:flex;"><span>                    [isinline] <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>                    [content] <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>                )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            [<span style="color:#ae81ff">2</span>] <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">Array</span>
</span></span><span style="display:flex;"><span>                (
</span></span><span style="display:flex;"><span>                    [src] <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>                    [type] <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>                    [isinline] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>                    [content] <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>                 <span style="color:#66d9ef">var</span> odesk_widgets_width <span style="color:#f92672">=</span> <span style="color:#ae81ff">340</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">var</span> odesk_widgets_height <span style="color:#f92672">=</span> <span style="color:#ae81ff">230</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            [<span style="color:#ae81ff">3</span>] <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">Array</span>
</span></span><span style="display:flex;"><span>                (
</span></span><span style="display:flex;"><span>                    [src] <span style="color:#f92672">=&gt;</span> http:<span style="color:#f92672">//</span>www<span style="color:#f92672">.</span>odesk<span style="color:#f92672">.</span>com<span style="color:#f92672">/</span>widgets<span style="color:#f92672">/</span>v1<span style="color:#f92672">/</span>providers<span style="color:#f92672">/</span>large<span style="color:#f92672">/~~</span><span style="color:#ae81ff">8</span>f250a5e32c8d3fa<span style="color:#f92672">.</span>js
</span></span><span style="display:flex;"><span>                    [type] <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>                    [isinline] <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>                    [content] <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>                )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            [count] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    [ embed ] <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">Array</span>
</span></span><span style="display:flex;"><span>        (
</span></span><span style="display:flex;"><span>            [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">Array</span>
</span></span><span style="display:flex;"><span>                (
</span></span><span style="display:flex;"><span>                    [src] <span style="color:#f92672">=&gt;</span> http:<span style="color:#f92672">//</span>www<span style="color:#f92672">.</span>youtube<span style="color:#f92672">-</span>nocookie<span style="color:#f92672">.</span>com<span style="color:#f92672">/</span>v<span style="color:#f92672">/</span>Fpm0m6bVfrM<span style="color:#f92672">&amp;</span>hl<span style="color:#f92672">=</span>en<span style="color:#f92672">&amp;</span>fs<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">&amp;</span>rel<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>                    [type] <span style="color:#f92672">=&gt;</span> application<span style="color:#f92672">/</span>x<span style="color:#f92672">-</span>shockwave<span style="color:#f92672">-</span>flash
</span></span><span style="display:flex;"><span>                    [isinline] <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>                    [content] <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>                )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            [count] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    [ style ] <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">Array</span>
</span></span><span style="display:flex;"><span>        (
</span></span><span style="display:flex;"><span>            [count] <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">**----</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">***</span> Page Print of http:<span style="color:#f92672">//</span>www<span style="color:#f92672">.</span>davidcraddock<span style="color:#f92672">.</span>net Finished <span style="color:#f92672">***</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">**----</span>
</span></span></code></pre></div><p>If you want to download a copy, the file is below. If you find it useful for you, a pingback would be appreciated.
<a href="http://www.davidcraddock.net/uploads/code-sample.tar.gz">code-sample.tar.gz</a></p>
]]></content:encoded>
    </item>
    
  </channel>
</rss>
