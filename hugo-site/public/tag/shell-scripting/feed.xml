<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Shell-Scripting on DavidCraddock.net</title>
    <link>https://davidcraddock.net/tag/shell-scripting/</link>
    <description>Recent content in Shell-Scripting on DavidCraddock.net</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Tue, 02 Feb 2016 17:28:39 +0000</lastBuildDate><atom:link href="https://davidcraddock.net/tag/shell-scripting/feed.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Fish Shell Scripting</title>
      <link>https://davidcraddock.net/2016/02/02/fish-shell-scripting/</link>
      <pubDate>Tue, 02 Feb 2016 17:28:39 +0000</pubDate>
      
      <guid>https://davidcraddock.net/2016/02/02/fish-shell-scripting/</guid>
      <description>&lt;p&gt;
  &lt;img loading=&#34;lazy&#34; src=&#34;http://i.telegraph.co.uk/multimedia/archive/01396/fish_1396516c.jpg&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
&lt;p&gt;A few months ago I switched across from Bash onto the &lt;a href=&#34;http://fishshell.com/&#34;&gt;Fish shell&lt;/a&gt;, on my main development machine. I can&amp;rsquo;t get enough of its fast autosuggestions and its sane scripting language. Compared to Bash it is very fun to use.&lt;/p&gt;
&lt;p&gt;Today I wrote a script to automate the backup of my development workspace onto a private bitbucket account. Bitbucket is good because it allows unlimited private repositories, but it caps the size of these repos at 2GB max, with some features disabled after 1GB. This means that I want to find out the size of my repo before automatically backing it up. This script does this:&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>
  <img loading="lazy" src="http://i.telegraph.co.uk/multimedia/archive/01396/fish_1396516c.jpg" alt=""  /></p>
<p>A few months ago I switched across from Bash onto the <a href="http://fishshell.com/">Fish shell</a>, on my main development machine. I can&rsquo;t get enough of its fast autosuggestions and its sane scripting language. Compared to Bash it is very fun to use.</p>
<p>Today I wrote a script to automate the backup of my development workspace onto a private bitbucket account. Bitbucket is good because it allows unlimited private repositories, but it caps the size of these repos at 2GB max, with some features disabled after 1GB. This means that I want to find out the size of my repo before automatically backing it up. This script does this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>#!/usr/bin/env fish
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>set size (du -sm . | awk &#39;{print $1}&#39;)
</span></span><span style="display:flex;"><span>echo &#34;Workspace is $size MB&#34;
</span></span><span style="display:flex;"><span>if math &#34;$size &gt; 1000&#34;
</span></span><span style="display:flex;"><span>  echo &#34;Workspace too big to commit!&#34;
</span></span><span style="display:flex;"><span>  exit
</span></span><span style="display:flex;"><span>else
</span></span><span style="display:flex;"><span>  echo &#34;Workspace is under 1GB, OK to commit&#34;
</span></span><span style="display:flex;"><span>end
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span>git commit -m &#34;Automated backup&#34;
</span></span><span style="display:flex;"><span>git push origin master
</span></span></code></pre></div><p>Each individual directory additionally usually has its own git config which is synced to the separate repos for the code I&rsquo;m actually working on. But if my development machine is stolen or somehow destroyed, or I want to quickly replicate my environment on another machine with access to the original repos, then I can regenerate the associations between the different directories. It also makes me mindful of not committing images or other video assets.</p>
]]></content:encoded>
    </item>
    
  </channel>
</rss>
