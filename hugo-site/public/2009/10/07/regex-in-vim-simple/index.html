<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Regex in VIM.. simple | DavidCraddock.net</title>
<meta name="keywords" content="">
<meta name="description" content="There are more than a gazillion ways to use regexs. I am sure they are each very useful for their own subset of problems. The sheer variety can be highly confusing and scary for a lot of people though, and you only need to use a few approaches to accomplish most text-editing tasks.
Here is a simple method for using regex in the powerful text editor VIM that will work well for common use.">
<meta name="author" content="Reorx">
<link rel="canonical" href="http://davidcraddock.net/2009/10/07/regex-in-vim-simple/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.97d99fcdd90c38f6e3343e959a97a0295b30f590730a4ece2347f7f24ad997d1.css" integrity="sha256-l9mfzdkMOPbjND6VmpegKVsw9ZBzCk7OI0f38krZl9E=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://davidcraddock.net/favicon.ico">
<link rel="apple-touch-icon" href="http://davidcraddock.net/apple-touch-icon.png">
<link rel="alternate" hreflang="en" href="http://davidcraddock.net/2009/10/07/regex-in-vim-simple/">
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Regex in VIM.. simple | DavidCraddock.net" />
<meta name="twitter:description" content="There are more than a gazillion ways to use regexs. I am sure they are each very useful for their own subset of problems. The sheer variety can be highly confusing and scary for a lot of people though, and you only need to use a few approaches to accomplish most text-editing tasks.
Here is a simple method for using regex in the powerful text editor VIM that will work well for common use." />
<meta property="og:title" content="Regex in VIM.. simple | DavidCraddock.net" />
<meta property="og:description" content="There are more than a gazillion ways to use regexs. I am sure they are each very useful for their own subset of problems. The sheer variety can be highly confusing and scary for a lot of people though, and you only need to use a few approaches to accomplish most text-editing tasks.
Here is a simple method for using regex in the powerful text editor VIM that will work well for common use." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://davidcraddock.net/2009/10/07/regex-in-vim-simple/" />
    <meta property="og:image" content="http://davidcraddock.net/cover.png"/>
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2009-10-07T06:40:02&#43;00:00" />
  <meta property="article:modified_time" content="2009-10-07T06:40:02&#43;00:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://davidcraddock.net/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Regex in VIM.. simple",
      "item": "http://davidcraddock.net/2009/10/07/regex-in-vim-simple/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Regex in VIM.. simple | DavidCraddock.net",
  "name": "Regex in VIM.. simple",
  "description": "There are more than a gazillion ways to use regexs. I am sure they are each very useful for their own subset of problems. The sheer variety can be highly confusing and scary for a lot of people though, and you only need to use a few approaches to accomplish most text-editing tasks.\nHere is a simple method for using regex in the powerful text editor VIM that will work well for common use.",
  "keywords": [
    
  ],
  "wordCount" : "1053",
  "inLanguage": "en",
  "datePublished": "2009-10-07T06:40:02Z",
  "dateModified": "2009-10-07T06:40:02Z",
  "author":[{
    "@type": "Person",
    "name": "Reorx"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://davidcraddock.net/2009/10/07/regex-in-vim-simple/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "DavidCraddock.net",
    "logo": {
      "@type": "ImageObject",
      "url": "http://davidcraddock.net/favicon.ico"
    }
  }
}
</script>
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary-bg: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list-page {
                background: var(--theme);
            }

            .list-page:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list-page:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

</head>

<body class=" type-posts kind-page layout-" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'auto';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://davidcraddock.net/" accesskey="h" title="DavidCraddock.net (Alt + H)">DavidCraddock.net</a>
            <span class="logo-switches">
            </span>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://davidcraddock.net/">Home</a>&nbsp;Â»&nbsp;<a href="http://davidcraddock.net/posts/">Posts</a></div><h1 class="post-title">Regex in VIM.. simple</h1>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>2009-10-07</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text" style="user-select: text;"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" style="user-select: text;"></path><polyline points="14 2 14 8 20 8" style="user-select: text;"></polyline><line x1="16" y1="13" x2="8" y2="13" style="user-select: text;"></line><line x1="16" y1="17" x2="8" y2="17" style="user-select: text;"></line><polyline points="10 9 9 9 8 9" style="user-select: text;"></polyline></svg>
  <span>1053 words</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="12" cy="12" r="9"></circle><polyline points="12 7 12 12 15 15"></polyline></svg>
  <span>5 min</span></span>

      
      
    </div>
  </header> <div class="toc side left">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#method" aria-label="Method">Method</a></li>
                <li>
                    <a href="#examples" aria-label="Examples">Examples</a></li>
                <li>
                    <a href="#for-more" aria-label="For More..">For More..</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>There are <a href="http://www.geocities.com/volontir/">more than a gazillion ways</a> to use regexs. I am sure they are each very useful for their own subset of problems. The sheer variety can be highly confusing and scary for <a href="http://www.google.co.uk/search?q=regex+difficult">a lot of people</a> though, and you only need to use a few approaches to accomplish most text-editing tasks.</p>
<p>Here is a simple method for using regex in the powerful text editor <a href="http://www.vim.org">VIM</a> that will work well for common use.</p>
<h2 id="method">Method</h2>
<p>We are going to take the &ldquo;search and delete a word&rdquo; problem for an example. We want to delete all instances of the singular noun &ldquo;needle&rdquo; in a text file. Let&rsquo;s assume there are no instances of the pluralisation &ldquo;needles&rdquo; in our document.</p>
<ol>
<li>
<p><strong><em>Debug on</em></strong>.. turn some VIM options on
<code>:set hlsearch :set wrapscan </code> - this will make all regex expressions possible to debug by visually showing what they match in your document (first line) and make all searches wrap around instead of just search forward from your current position, which is the default. (second line)</p>
</li>
<li>
<p><strong><em>Develop and Test</em></strong>.. your regex attempts by using a simple search. Here we see three attempts at solving the problem: <code>:/needl :/needle :/&lt;needle&gt;</code> - our third try is correct, and highlights all words that spell &ldquo;needle&rdquo;. The <strong>&lt;</strong> and <strong>&gt;</strong> markers allow you to specify the beginning and the end of a word. Play with different regexs using the simple search and watching what is highlighted, until you discover one that works for you.</p>
</li>
<li>
<p><strong><em>Run</em></strong>&hellip; your regex <code>:%s/&lt;needle&gt;//g</code> - once you&rsquo;ve figured out a regex, run the regex on your document. This example will execute a search for the word &ldquo;needle&rdquo; and delete every one. If you wanted to substitute needle for another word, you would put the word in between the <strong>/</strong> <strong>/</strong> marks. As we can see, there is nothing between the marks in this example, so it will replace instances of &ldquo;needle&rdquo; with nothing. This means it will serve to delete every instance of the word &ldquo;needle&rdquo;.</p>
</li>
<li>
<p><strong><em>Check things are OK</em></strong>&hellip; with your document <code>:/&lt;needle&gt; :/needle :/needl</code> - has the regex done what you want? Use the search function to see if regex has done what you wanted it to do. The above examples show different searches through the document to see if different variations remain. Any matches of these searches will highlight any problems. You can use the lower-case <strong>N</strong>(next search result) and lower-case <strong>P</strong>(previous search result) commands to navigate through any found search results. You must remember to manually look through the document and see what the regex has changed, make sure there aren&rsquo;t any unwanted surprises!</p>
</li>
<li>
<p><strong><em>Recover</em></strong>&hellip; from any mistakes <code>u</code> - just press the <strong>U</strong> key (with no capslock or shift). This will undo the very last last change made to the document.</p>
</li>
<li>
<p><strong><em>Redo</em></strong>&hellip; any work that you need to <code>&lt;ctrl&gt;-r</code> - use the redo fuction; press the <strong>CONTROL</strong> and <strong>R</strong> keys together (with no capslock or shift). This will redo the last change made to the document.</p>
</li>
<li>
<p><strong><em>Finish up and Write</em></strong>&hellip; to file <code>:w</code> - write your work on the document to file. Even after you have written out to file, you can probably still use the undo function to get back to where you were, but it&rsquo;s best practice to not rely on this, and only write once you&rsquo;re done.</p>
</li>
<li>
<p><strong><em>Debug off</em></strong>.. turn some options off
<code>:set nohlsearch :set nowrapscan </code> - turn off the regular expression highlighting (line 1). turn off the wraparound searching (line 2). You can leave either or both options on if you want, they&rsquo;re often useful. Up to you.</p>
</li>
</ol>
<p>Use a combination of these wonderful commands to test and improve your regex development skills in VIM.</p>
<h2 id="examples">Examples</h2>
<p>Here I use the shorthand &quot; <strong>#&hellip;</strong>&quot; to denote comments on what I&rsquo;m doing&hellip; if you want to copy and paste the example as written, then you will have to remove those comments.</p>
<p>1. Remove ancient uppercase <!-- raw HTML omitted --> tags from a document.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>:set wrapscan # debug on
</span></span><span style="display:flex;"><span>:set hlsearch # debug on
</span></span><span style="display:flex;"><span>:/&lt;BLINK&gt; # try 1.. bingo! first time.. selected all tags I want
</span></span><span style="display:flex;"><span>:%s/&lt;BLINK&gt;//g # lets execute my regex remove
</span></span><span style="display:flex;"><span>:/BLINK # check 1.. testing things are OK in my file by searching through..
</span></span><span style="display:flex;"><span>:/blinked # check 2.. yep thats ok..
</span></span><span style="display:flex;"><span>:/&lt;BLINK&gt; # check 3.. yep looks ok... the problem tags are gone
</span></span><span style="display:flex;"><span># ...manual scroll through the document.. looks good!
</span></span><span style="display:flex;"><span>:w # write out to file
</span></span><span style="display:flex;"><span>:set nohlsearch # debug off
</span></span><span style="display:flex;"><span>:set nowrapscan # debug off
</span></span></code></pre></div><p>2. Oh no! We missed some lower and mixedcase <!-- raw HTML omitted --> tags that some sneaky person slipped in. Let&rsquo;s take them out.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>:set wrapscan # debug on
</span></span><span style="display:flex;"><span>:set hlsearch # debug on
</span></span><span style="display:flex;"><span>:/&lt;blink&gt; # try 1.. hm.. worked for many, but didnt match BlInK or blINK mixedcase
</span></span><span style="display:flex;"><span>:/&lt;blink&gt;/i # try 2.. much better.. seems to have worked!
</span></span><span style="display:flex;"><span>:%s/&lt;blink&gt;//i # lets execute my regex remove
</span></span><span style="display:flex;"><span>:/BLINK # check 1.. testing things are OK in my file by searching through..
</span></span><span style="display:flex;"><span>:/blinked # check 2.. yep thats ok..
</span></span><span style="display:flex;"><span>:/&lt;blink&gt; # check 3.. yep thats fine.
</span></span><span style="display:flex;"><span>:/&lt;blink&gt;/i # check 4.. looks good... problem solved
</span></span><span style="display:flex;"><span># ...manual scroll through the document.. looks much better!
</span></span><span style="display:flex;"><span>:w # write out to file
</span></span><span style="display:flex;"><span>:set nohlsearch # debug off
</span></span><span style="display:flex;"><span>:set nowrapscan # debug off
</span></span></code></pre></div><p>3. Replacing uppercase or mixedcase <!-- raw HTML omitted --> tags with the more modern <!-- raw HTML omitted -->.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>:set wrapscan # debug on
</span></span><span style="display:flex;"><span>:set hlsearch # debug on
</span></span><span style="display:flex;"><span>:/&lt;BR&gt; # try 1.. hmm.. just uppercase.. not gonna work..
</span></span><span style="display:flex;"><span>:/&lt;br&gt; # try 2.. hmm.. just lowercase..
</span></span><span style="display:flex;"><span>:/&lt;BR&gt;/i # try 3.. ahh.. that&#39;ll be it then
</span></span><span style="display:flex;"><span>:%s/&lt;BR&gt;/&lt;br&gt;/gi # lets execute my regex substitution
</span></span><span style="display:flex;"><span>:/BR # check 1.. testing things are OK in my file by searching through..
</span></span><span style="display:flex;"><span>:/br # check 2.. yep thats ok..
</span></span><span style="display:flex;"><span>/bR # check 3 ..yup..
</span></span><span style="display:flex;"><span>:/&lt;BR&gt;/i # check 4.. yep looks ok... the problem tags seem to be gone
</span></span><span style="display:flex;"><span># ...manual scroll through the document.. looks good!
</span></span><span style="display:flex;"><span>:w # write out to file
</span></span><span style="display:flex;"><span>:set nohlsearch # debug off
</span></span><span style="display:flex;"><span>:set nowrapscan # debug off
</span></span></code></pre></div><h2 id="for-more">For More..</h2>
<p>Regexs are the gift that just keeps on giving. Here are some good resources on regexs in general, and regexs in VIM.</p>
<ul>
<li><a href="http://www.gskinner.com/RegExr/">A great modern way to learn regexs.. try them online! interactive flash awesomeness.</a></li>
<li><a href="http://www.viemu.com/a_vi_vim_graphical_cheat_sheet_tutorial.html">A neat graphical VI/VIM cheat-sheet</a>.</li>
<li><a href="http://www.geocities.com/volontir/">An advanced VIM/regex tutorial.</a>.</li>
<li><a href="http://briancarper.net/blog/vim-regexes-are-awesome">More VIM/regex ninja skills.</a></li>
<li><a href="http://stackoverflow.com/questions/825764/vim-regex-search-csv-string-and-paste-matches">Stackoverflow is a good place to find practical ways to solve regex problems with VIM.</a></li>
<li><a href="http://www.regular-expressions.info/">Probably the most definitive regex site on the &rsquo;net</a></li>
</ul>

  </div>
  <img src="/images/me.jpg">

<div>
    <ul>
        <li><a href="/">Blog Posts</a></li>
        <li><a href="/my-home-network/">Home Network</a></li>
        <li><a href="/my-gaming-setup/">Gaming Setup</a></li>
        <li><a href="/my-mobile-laptop-setup/">Mobile Working Setup</a></li>
        <li><a href="/my-work-computer/">WFH Computer Setup</a></li>
        <li><a href="/my-bike/">Bike Setup</a></li>
        <li><a href="http://davidcraddocktutor.com">Software Career Tutoring</a></li>
        <li><a href="http://davidcraddockaudio.com">Music Industry Portfolio</a></li>
        <li><a href="https://github.com/wordswords">Github</a></li>
        <li><a href="https://linkedin.com/in/davidcraddock">LinkedIn</a></li>
        <li><a href="https://wordswords.github.io/dpc-resume/CV.html">CV/Resume</a></li>
    </ul>
</div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="http://davidcraddock.net/2009/10/17/speed-climbing/">
    <span class="title">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select: text;"><line x1="19" y1="12" x2="5" y2="12" style="user-select: text;"></line><polyline points="12 19 5 12 12 5" style="user-select: text;"></polyline></svg>&nbsp;Prev Page</span>
    <br>
    <span>Speed Climbing</span>
  </a>
  <a class="next" href="http://davidcraddock.net/2009/04/07/heart-rate-monitor-now-available-for-the-xo-laptop/">
    <span class="title">Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select: text;"><line x1="5" y1="12" x2="19" y2="12" style="user-select: text;"></line><polyline points="12 5 19 12 12 19" style="user-select: text;"></polyline></svg>
    </span>
    <br>
    <span>Heart rate monitor now available for the XO Laptop</span>
  </a>
</nav>

  </footer>
    <div class="comments-separator"></div><div class="comments-box">
  <div id="disqus_thread"></div>
</div>

<script type="text/javascript">
  var disqus_config = function () {
    this.page.url = 'http:\/\/davidcraddock.net\/2009\/10\/07\/regex-in-vim-simple\/';  
    this.page.identifier = 'regex-in-vim-simple'; 
  };

  (function () {
    const disqus = window.DISQUS
    if (disqus) {
      
      
      disqus.reset({
        reload: true,
        config: disqus_config,
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = '//' + 'davidcraddocknet' + '.disqus.com/embed.js';
      s.defer = true;
      s.setAttribute('data-timestamp', +new Date());
      
      s.setAttribute('data-no-instant', '')
      d.head.appendChild(s);
    }
  })();
</script>

</article>
    </main>
    
<footer class="footer">
  <span>&copy; 2024 <a href="http://davidcraddock.net/">DavidCraddock.net</a></span><span style="display: inline-block; margin-left: 1em;">
    <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a>
  </span>
  <span style="display: inline-block; margin-left: 1em;">
    Powered by
    <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
    <a href="https://github.com/reorx/hugo-PaperModX/" rel="noopener" target="_blank">PaperModX</a>
  </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '1' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '1' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>
<script>
  document.querySelectorAll('pre > code').forEach((codeblock) => {
    const container = codeblock.parentNode.parentNode;

    const copybutton = document.createElement('button');
    copybutton.classList.add('copy-code');
    copybutton.innerText = 'copy';

    function copyingDone() {
      copybutton.innerText = 'copied!';
      setTimeout(() => {
        copybutton.innerText = 'copy';
      }, 2000);
    }

    copybutton.addEventListener('click', (cb) => {
      if ('clipboard' in navigator) {
        navigator.clipboard.writeText(codeblock.textContent);
        copyingDone();
        return;
      }

      const range = document.createRange();
      range.selectNodeContents(codeblock);
      const selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
      try {
        document.execCommand('copy');
        copyingDone();
      } catch (e) { };
      selection.removeRange(range);
    });

    if (container.classList.contains("highlight")) {
      container.appendChild(copybutton);
    } else if (container.parentNode.firstChild == container) {
      
    } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
      
      codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
    } else {
      
      codeblock.parentNode.appendChild(copybutton);
    }
  });
</script>




<script>
  
  
  (function() {
    const enableTocScroll = '1' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>
<script>
  mediumZoom('.entry-cover img');
  mediumZoom('.post-content img:not([no-zoom])');
</script>

<script src="/js/instantclick.min.js" data-no-instant
></script>
<script data-no-instant>
  
  
  
  
  
  
  InstantClick.init();
</script>
</body>

</html>
